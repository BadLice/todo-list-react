{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\utente\\\\Desktop\\\\React tutorial\\\\react-backed\\\\todo-list\\\\src\\\\components\\\\Login.js\";\nimport React from 'react';\nimport './style/Login.css';\nimport { Redirect } from \"react-router-dom\";\n\nvar SHA256 = require(\"crypto-js/sha256\");\n\nclass Login extends React.Component {\n  handleLogin(username, password) {\n    fetch('/login', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"username\": username,\n        \"password\": SHA256(password).toString()\n      })\n    }).then(res => res.json()).then(result => {\n      sessionStorage.setItem('isValidLogin', result.valid);\n      sessionStorage.setItem('sessionId', result.sessionId);\n      this.setState({});\n    });\n  }\n\n  handleSignUp(username, password) {\n    fetch('/signUp', {\n      method: 'post',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        \"username\": username,\n        \"password\": SHA256(password).toString()\n      })\n    }).then(res => res.json()).then(result => {\n      this.setState({});\n    });\n  }\n\n  handleNotify(text) {\n    Container.notifyText = text;\n    Container.showNotify = true;\n    if (Container.notifyTimeoutFunction) clearTimeout(Container.notifyTimeoutFunction);\n    Container.notifyTimeoutFunction = setTimeout(function () {\n      Container.showNotify = false;\n      this.setState({});\n    }.bind(this), 3 * 1000);\n  }\n\n  render() {\n    if (sessionStorage.getItem('isValidLogin') === \"true\" && sessionStorage.getItem('sessionId') !== \"undefined\") {\n      return React.createElement(Redirect, {\n        to: \"/home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      });\n    } else return React.createElement(\"div\", {\n      className: \"w3-container w3-display-middle w3-border w3-border-blue w3-padding w3-white login-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: (Container.showNotify ? \"w3-animate-opacity\" : \"hidden-opacity\") + \" w3-panel w3-margin w3-display-bottomleft w3-dark-grey w3-border w3-border-dark-grey overlay\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, Container.notifyText)), React.createElement(\"div\", {\n      className: \"w3-container w3-border-bottom w3-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"w3-text-pink\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, \"Login\")), React.createElement(\"div\", {\n      className: \"w3-container w3-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, \"Username\"), React.createElement(\"input\", {\n      placeholder: \"Insert username\",\n      className: \"w3-input login-input\",\n      ref: \"usernameInput\",\n      type: \"text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    })), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, \"Password\"), React.createElement(\"input\", {\n      placeholder: \"Insert password\",\n      className: \"w3-input login-input\",\n      ref: \"passwordInput\",\n      type: \"password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"w3-container w3-padding w3-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      className: \"login-button w3-btn w3-blue w3-margin\",\n      onClick: () => this.handleLogin(this.refs.usernameInput.value, this.refs.passwordInput.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, \"Login\"), React.createElement(\"button\", {\n      className: \"login-button w3-btn w3-border w3-border-pink w3-margin w3-center\",\n      onClick: () => this.handleSignUp(this.refs.usernameInput.value, this.refs.passwordInput.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, \"Sign up\")));\n  }\n\n}\n\nexport default Login;","map":{"version":3,"sources":["C:\\Users\\utente\\Desktop\\React tutorial\\react-backed\\todo-list\\src\\components\\Login.js"],"names":["React","Redirect","SHA256","require","Login","Component","handleLogin","username","password","fetch","method","headers","body","JSON","stringify","toString","then","res","json","result","sessionStorage","setItem","valid","sessionId","setState","handleSignUp","handleNotify","text","Container","notifyText","showNotify","notifyTimeoutFunction","clearTimeout","setTimeout","bind","render","getItem","refs","usernameInput","value","passwordInput"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,mBAAP;AAEA,SAASC,QAAT,QAA0B,kBAA1B;;AACA,IAAIC,MAAM,GAAGC,OAAO,CAAC,kBAAD,CAApB;;AAEA,MAAMC,KAAN,SAAoBJ,KAAK,CAACK,SAA1B,CAAoC;AAEnCC,EAAAA,WAAW,CAACC,QAAD,EAAUC,QAAV,EAAoB;AAC9BC,IAAAA,KAAK,CAAC,QAAD,EAAU;AACbC,MAAAA,MAAM,EAAE,MADK;AAEbC,MAAAA,OAAO,EAAE;AAAC,wBAAe;AAAhB,OAFI;AAGbC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACrB,oBAAYP,QADS;AAErB,oBAAYL,MAAM,CAACM,QAAD,CAAN,CAAiBO,QAAjB;AAFS,OAAf;AAHO,KAAV,CAAL,CAQCC,IARD,CAQMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARb,EASCF,IATD,CASMG,MAAM,IAAI;AACfC,MAAAA,cAAc,CAACC,OAAf,CAAuB,cAAvB,EAAsCF,MAAM,CAACG,KAA7C;AACAF,MAAAA,cAAc,CAACC,OAAf,CAAuB,WAAvB,EAAmCF,MAAM,CAACI,SAA1C;AACA,WAAKC,QAAL,CAAc,EAAd;AACA,KAbD;AAeA;;AAEDC,EAAAA,YAAY,CAAClB,QAAD,EAAUC,QAAV,EAAoB;AAC/BC,IAAAA,KAAK,CAAC,SAAD,EAAW;AACdC,MAAAA,MAAM,EAAE,MADM;AAEdC,MAAAA,OAAO,EAAE;AAAC,wBAAe;AAAhB,OAFK;AAGdC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACrB,oBAAYP,QADS;AAErB,oBAAYL,MAAM,CAACM,QAAD,CAAN,CAAiBO,QAAjB;AAFS,OAAf;AAHQ,KAAX,CAAL,CAQCC,IARD,CAQMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EARb,EASCF,IATD,CASMG,MAAM,IAAI;AAEf,WAAKK,QAAL,CAAc,EAAd;AACA,KAZD;AAcA;;AAEDE,EAAAA,YAAY,CAACC,IAAD,EAAO;AAClBC,IAAAA,SAAS,CAACC,UAAV,GAAuBF,IAAvB;AACAC,IAAAA,SAAS,CAACE,UAAV,GAAuB,IAAvB;AAEA,QAAGF,SAAS,CAACG,qBAAb,EACCC,YAAY,CAACJ,SAAS,CAACG,qBAAX,CAAZ;AAEDH,IAAAA,SAAS,CAACG,qBAAV,GAAkCE,UAAU,CAAC,YAAU;AACtDL,MAAAA,SAAS,CAACE,UAAV,GAAuB,KAAvB;AACU,WAAKN,QAAL,CAAc,EAAd;AACJ,KAHsC,CAGrCU,IAHqC,CAGhC,IAHgC,CAAD,EAGzB,IAAI,IAHqB,CAA5C;AAIA;;AAEDC,EAAAA,MAAM,GAAG;AACR,QAAGf,cAAc,CAACgB,OAAf,CAAuB,cAAvB,MAA2C,MAA3C,IAAqDhB,cAAc,CAACgB,OAAf,CAAuB,WAAvB,MAAwC,WAAhG,EAA6G;AAC5G,aAAQ,oBAAC,QAAD;AAAU,QAAA,EAAE,EAAC,OAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AACA,KAFD,MAIC,OACC;AAAK,MAAA,SAAS,EAAC,wFAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAEA;AAAK,MAAA,SAAS,EAAE,CAACR,SAAS,CAACE,UAAV,GAAuB,oBAAvB,GAA8C,gBAA/C,IAAmE,8FAAnF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIF,SAAS,CAACC,UAAd,CADF,CAFA,EAMC;AAAK,MAAA,SAAS,EAAC,yCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE;AAAI,MAAA,SAAS,EAAC,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,CAND,EAUC;AAAK,MAAA,SAAS,EAAC,wBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACK;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADL,EAEC;AAAO,MAAA,WAAW,EAAC,iBAAnB;AAAqC,MAAA,SAAS,EAAC,sBAA/C;AAAsE,MAAA,GAAG,EAAC,eAA1E;AAA0F,MAAA,IAAI,EAAC,MAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,CADD,EAMC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,EAEC;AAAO,MAAA,WAAW,EAAC,iBAAnB;AAAqC,MAAA,SAAS,EAAC,sBAA/C;AAAsE,MAAA,GAAG,EAAC,eAA1E;AAA0F,MAAA,IAAI,EAAC,UAA/F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFD,CAND,CAVD,EAqBE;AAAK,MAAA,SAAS,EAAC,mCAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAQ,MAAA,SAAS,EAAC,uCAAlB;AAA0D,MAAA,OAAO,EAAE,MAAM,KAAKvB,WAAL,CAAiB,KAAK+B,IAAL,CAAUC,aAAV,CAAwBC,KAAzC,EAA+C,KAAKF,IAAL,CAAUG,aAAV,CAAwBD,KAAvE,CAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADD,EAEA;AAAQ,MAAA,SAAS,EAAC,kEAAlB;AAAqF,MAAA,OAAO,EAAE,MAAM,KAAKd,YAAL,CAAkB,KAAKY,IAAL,CAAUC,aAAV,CAAwBC,KAA1C,EAAgD,KAAKF,IAAL,CAAUG,aAAV,CAAwBD,KAAxE,CAApG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFA,CArBF,CADD;AA4BD;;AAnFkC;;AAsFpC,eAAenC,KAAf","sourcesContent":["import React from 'react';\r\nimport './style/Login.css';\r\n\r\nimport { Redirect  } from \"react-router-dom\";\r\nvar SHA256 = require(\"crypto-js/sha256\");\r\n\r\nclass Login extends React.Component {\r\n\r\n\thandleLogin(username,password) {\r\n\t\tfetch('/login',{\r\n\t\t\t method: 'post',\r\n\t\t\t headers: {'Content-Type':'application/json'},\r\n\t\t\t body: JSON.stringify({\r\n\t\t\t\t\"username\": username,\r\n\t\t\t\t\"password\": SHA256(password).toString()\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(result => {\r\n\t\t\tsessionStorage.setItem('isValidLogin',result.valid);\r\n\t\t\tsessionStorage.setItem('sessionId',result.sessionId);\r\n\t\t\tthis.setState({});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleSignUp(username,password) {\r\n\t\tfetch('/signUp',{\r\n\t\t\t method: 'post',\r\n\t\t\t headers: {'Content-Type':'application/json'},\r\n\t\t\t body: JSON.stringify({\r\n\t\t\t\t\"username\": username,\r\n\t\t\t\t\"password\": SHA256(password).toString()\r\n\t\t\t})\r\n\t\t})\r\n\t\t.then(res => res.json())\r\n\t\t.then(result => {\r\n\r\n\t\t\tthis.setState({});\r\n\t\t});\r\n\r\n\t}\r\n\r\n\thandleNotify(text) {\r\n\t\tContainer.notifyText = text;\r\n\t\tContainer.showNotify = true;\r\n\r\n\t\tif(Container.notifyTimeoutFunction)\r\n\t\t\tclearTimeout(Container.notifyTimeoutFunction)\r\n\r\n\t Container.notifyTimeoutFunction =\tsetTimeout(function(){\r\n\t\t\tContainer.showNotify = false;\r\n             this.setState({});\r\n        }.bind(this),3 * 1000);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(sessionStorage.getItem('isValidLogin') === \"true\" && sessionStorage.getItem('sessionId') !== \"undefined\") {\r\n\t\t\treturn (<Redirect to=\"/home\"/>);\r\n\t\t}\r\n\t\telse\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"w3-container w3-display-middle w3-border w3-border-blue w3-padding w3-white login-body\">\r\n\r\n\t\t\t\t<div className={(Container.showNotify ? \"w3-animate-opacity\" : \"hidden-opacity\") + \" w3-panel w3-margin w3-display-bottomleft w3-dark-grey w3-border w3-border-dark-grey overlay\" }>\r\n\t\t\t\t  <p>{Container.notifyText}</p>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t\t<div className=\"w3-container w3-border-bottom w3-center\">\r\n\t\t\t\t\t  <h1 className=\"w3-text-pink\">Login</h1>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div className=\"w3-container w3-center\">\r\n\t\t\t\t\t\t<p>\r\n\t\t         <label>Username</label>\r\n\t\t\t\t\t\t <input placeholder=\"Insert username\" className=\"w3-input login-input\" ref=\"usernameInput\" type=\"text\"/>\r\n\t\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t\t<p>\r\n\t\t\t\t\t\t <label>Password</label>\r\n\t\t\t\t\t\t <input placeholder=\"Insert password\" className=\"w3-input login-input\" ref=\"passwordInput\" type=\"password\" />\r\n\t\t\t\t\t\t</p>\r\n\t\t       </div>\r\n\t\t\t\t\t <div className=\"w3-container w3-padding w3-center\">\r\n\t\t\t\t\t \t<button className=\"login-button w3-btn w3-blue w3-margin\" onClick={() => this.handleLogin(this.refs.usernameInput.value,this.refs.passwordInput.value)}>Login</button>\r\n\t\t\t\t\t\t<button className=\"login-button w3-btn w3-border w3-border-pink w3-margin w3-center\" onClick={() => this.handleSignUp(this.refs.usernameInput.value,this.refs.passwordInput.value)}>Sign up</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}